(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,n,t){e.exports=t.p+"static/media/pick.0e7d342a.wav"},function(e,n,t){e.exports=t.p+"static/media/hit.fe22c65d.wav"},function(e,n,t){e.exports=t(4)},function(e,n,t){},function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.forEach(function(n){r(e,n,t[n])})}return e}t.r(n);t(3);var o=function(e,n,t,r,i){var o=n.lineWidth,c=n.xPadding,a=n.yPadding,l=n.cellWidth;e.strokeStyle=i,e.lineWidth=o,e.strokeRect(c+l*t+1.5*o,a+l*r+1.5*o,l-3*o,l-3*o)},c=function(e,n,t,r,i){var o=n.lineWidth,c=n.xPadding,a=n.yPadding,l=n.cellWidth;e.fillStyle=i,e.fillRect(c+l*t+3.5*o,a+l*r+3.5*o,l-7*o,l-7*o)},a=function(e,n,t,r){o(e,n,t,r,"rgba(0, 128, 0, 0.2)"),c(e,n,t,r,"rgba(0, 128, 0, 0.2")},l=function(e,n){var t=n.width,r=n.height,i=n.displayHeight,o=n.columns,c=n.rows;e.fillStyle="black",e.fillRect(0,0,t,r+i);for(var l=0;l<o;l++)for(var u=0;u<c;u++)a(e,n,l,u)};function u(e){if(Array.isArray(e))return e}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var d=function(e,n,t){var r,i=u(r=t.coords)||s(r)||f(),a=i[0],l=i.slice(1);!function(e,n,t,r){o(e,n,t,r,n.SNAKE_COLOR)}(e,n,a.i,a.j),l.forEach(function(t){var r=t.i,i=t.j;!function(e,n,t,r){o(e,n,t,r,n.SNAKE_COLOR),c(e,n,t,r,n.SNAKE_COLOR)}(e,n,r,i)})},h=function(e,n,t){t.feed.forEach(function(t){var r=t.i,i=t.j;!function(e,n,t,r){o(e,n,t,r,"orange"),c(e,n,t,r,"orange")}(e,n,r,i)})},g=function(e,n,t){var r=n.height,i=n.displayHeight;e.fillStyle="green",e.font="80px Digital",e.textBaseline="middle",e.textAlign="left",e.fillText("Score: ".concat(function(e){return e.coords.length-3}(t)),20,r+i/2)},v=function(e,n,t){var r=n.height,i=n.displayHeight,o=t.menuIndex;e.font="80px Digital",e.textBaseline="middle",e.textAlign="left",e.fillStyle=0===o?"orange":"green",e.fillText("play",20,r+i/2),e.textAlign="right",e.fillStyle=1===o?"orange":"green",e.fillText("scores",n.width-20,r+i/2)};function p(e,n){return u(e)||function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var c,a=e[Symbol.iterator]();!(r=(c=a.next()).done)&&(t.push(c.value),!n||t.length!==n);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return t}(e,n)||f()}function w(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m=function(e){return function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},o={};return e.forEach(function(e){var c=n(e),a=t(e);o=i({},o,r({},c,[].concat(w(o[c]||[]),[a])))}),o}(e,function(e){return e.score})},y=function(e,n,t){var r=m(t.scoresList);e.font="30px Digital",e.textBaseline="top",e.textAlign="left",e.fillStyle="green";var i=1,o=1,c=1;Object.entries(r).sort(function(e,n){return n[0]-e[0]}).forEach(function(n){var t=p(n,2),r=(t[0],t[1]),a=1===r.length?c:"".concat(c,"-").concat(c+r.length-1);r.reverse().forEach(function(n){var t=n.name,l=n.score;e.fillText("".concat(a,". ").concat(t," (").concat(l,")"),30+280*(o-1),40*i++),c+=r.length,i>8&&(i=1,o++)})})},b=function(e,n,t){switch(e.clearRect(0,0,n.width,n.height),l(e,n),t.scene){case"scores":y(e,n,t);break;case"menu":d(e,n,t),h(e,n,t),v(e,n,t);break;case"game":d(e,n,t),h(e,n,t),g(e,n,t)}},j=function(e,n,t){var r,i,o=function(e){return function(n){var t=n.i;return n.j*e+t}}(t),c=function(e){return function(n){return{i:n%e,j:Math.floor(n/e)}}}(t),a=e.map(o),l=(r=t*n,w(Array(r)).map(function(e,n){return n})).filter(function(e){return!a.includes(e)});return c((i=l)[Math.floor(Math.random()*i.length)])},A=function(e,n){return e.i===n.i&&e.j===n.j},x=t(0),S=t.n(x),O=t(1),k=t.n(O),E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;fetch(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(n).reduce(function(e,n){var t=p(n,2),r=t[0],i=t[1];return e.searchParams.set(r,i),e},new URL(e))}(e,n),{method:t}).then(function(e){return e.json()}).then(r).catch(i)},D=new Audio(S.a),K=new Audio(k.a),P=function(e){var n=window.prompt("Enter your name:",localStorage.name||"Unnamed hero");localStorage.name=n;var t=e.coords.length-3;!function(e,n,t){var r=e.name,i=e.score,o=e.level;E("https://snake-game-backend.glitch.me/api/records",{name:r,score:i,level:o},"POST",n,t)}({name:n,level:1,score:t}),alert("Congratulation, ".concat(n,"! You earned ").concat(t," scores"))},R=function(e,n){if("game"!==n.scene)return n;var t,r=n,o=r.coords,c=r.lastDirection,a=r.feed,l=e.columns,u=e.rows,s=o[0],f=o[o.length-1],d=o.slice(1,-1);switch(c){case"up":t={i:s.i,j:s.j-1};break;case"down":t={i:s.i,j:s.j+1};break;case"left":t={i:s.i-1,j:s.j};break;case"right":t={i:s.i+1,j:s.j}}if(n=i({},n,{snakeDirection:c}),d.some(function(e){return A(e,t)}))return K.play(),P(n),null;if(t.i<0||t.i>=l||t.j<0||t.j>=u){if(n.walls)return K.play(),P(n),null;t.i=(t.i+l)%l,t.j=(t.j+u)%u}var h=a.find(function(e){return A(e,t)});return h?(D.play(),i({},n,{feed:[].concat(w(a.filter(function(e){return e!==h})),[j([].concat(w(o),w(a)),u,l)]),coords:[t,s].concat(w(d),[f])})):i({},n,{coords:[t,s].concat(w(d))})},T=document.createElement("canvas");T.setAttribute("width",800),T.setAttribute("height",500),document.getElementById("root").appendChild(T);var L=T.getContext("2d"),W={displayHeight:100,width:800,height:400,cellWidth:70,lineWidth:7,rows:Math.floor(400/70),columns:Math.floor(800/70),yPadding:25,xPadding:15,SNAKE_COLOR:"green",fps:100},C={scene:"menu",menuIndex:0,speed:5,coords:[{i:3,j:2},{i:2,j:2},{i:1,j:2}],feed:[],snakeDirection:"down",lastDirection:"right",walls:!1,initialized:!0},I=C;window.onkeydown=function(e){if("menu"===I.scene){var n=I.menuIndex;switch(e.code){case"ArrowDown":case"KeyS":case"ArrowRight":case"KeyD":case"ArrowUp":case"KeyW":case"ArrowLeft":case"KeyA":return void(I=i({},I,{menuIndex:1-n}));case"Space":case"Enter":return void(0===n?I=i({},I,{scene:"game",feed:[{i:6,j:2}]}):E("https://snake-game-backend.glitch.me/api/records",{level:1},"GET",function(e){I=i({},I,{scene:"scores",scoresList:e})},r))}}else{var t=I.snakeDirection;switch(e.code){case"ArrowDown":case"KeyS":return void("up"!==t&&(I=i({},I,{lastDirection:"down"})));case"ArrowUp":case"KeyW":return void("down"!==t&&(I=i({},I,{lastDirection:"up"})));case"ArrowLeft":case"KeyA":return void("right"!==t&&(I=i({},I,{lastDirection:"left"})));case"ArrowRight":case"KeyD":return void("left"!==t&&(I=i({},I,{lastDirection:"right"})))}}var r},function e(){I=R(W,I)||C,b(L,W,I),setTimeout(e,1e3/function(){switch(I.scene){case"game":return I.speed;case"menu":return W.fps;case"scores":return.01;default:return 100}}())}()}],[[2,1]]]);
//# sourceMappingURL=main.552df1d8.chunk.js.map